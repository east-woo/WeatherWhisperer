{"ast":null,"code":"/**\n * @module ol/interaction/Link\n */\nimport EventType from '../events/EventType.js';\nimport Interaction from './Interaction.js';\nimport MapEventType from '../MapEventType.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { toFixed } from '../math.js';\n\n/**\n * @param {number} number A number.\n * @return {number} A number with at most 5 decimal places.\n */\nfunction to5(number) {\n  return toFixed(number, 5);\n}\n\n/**\n * @param {string} string A string.\n * @return {number} A number representing the string.\n */\nfunction readNumber(string) {\n  return parseFloat(string);\n}\n\n/**\n * @param {number} number A number.\n * @return {string} A string representing the number.\n */\nfunction writeNumber(number) {\n  return to5(number).toString();\n}\n\n/**\n * @param {number} a A number.\n * @param {number} b A number.\n * @return {boolean} The numbers are different.\n */\nfunction differentNumber(a, b) {\n  if (isNaN(a)) {\n    return false;\n  }\n  return a !== readNumber(writeNumber(b));\n}\n\n/**\n * @param {Array<number>} a An array of two numbers.\n * @param {Array<number>} b An array of two numbers.\n * @return {boolean} The arrays are different.\n */\nfunction differentArray(a, b) {\n  return differentNumber(a[0], b[0]) || differentNumber(a[1], b[1]);\n}\n\n/** @typedef {'x'|'y'|'z'|'r'|'l'} Params */\n\n/**\n * @typedef {function(string):void} Callback\n */\n\n/**\n * @typedef {Object} Options\n * @property {boolean|import('../View.js').AnimationOptions} [animate=true] Animate view transitions.\n * @property {Array<Params>} [params=['x', 'y', 'z', 'r', 'l']] Properties to track. Default is to track\n * `x` (center x), `y` (center y), `z` (zoom), `r` (rotation) and `l` (layers).\n * @property {boolean} [replace=false] Replace the current URL without creating the new entry in browser history.\n * By default, changes in the map state result in a new entry being added to the browser history.\n * @property {string} [prefix=''] By default, the URL will be updated with search parameters x, y, z, and r.  To\n * avoid collisions with existing search parameters that your application uses, you can supply a custom prefix for\n * the ones used by this interaction (e.g. 'ol:').\n */\n\n/**\n * @classdesc\n * An interaction that synchronizes the map state with the URL.\n *\n * @api\n */\nclass Link extends Interaction {\n  /**\n   * @param {Options} [options] Link options.\n   */\n  constructor(options) {\n    super();\n    options = Object.assign({\n      animate: true,\n      params: ['x', 'y', 'z', 'r', 'l'],\n      replace: false,\n      prefix: ''\n    }, options || {});\n    let animationOptions;\n    if (options.animate === true) {\n      animationOptions = {\n        duration: 250\n      };\n    } else if (!options.animate) {\n      animationOptions = null;\n    } else {\n      animationOptions = options.animate;\n    }\n\n    /**\n     * @type {import('../View.js').AnimationOptions|null}\n     * @private\n     */\n    this.animationOptions_ = animationOptions;\n\n    /**\n     * @type {Object<Params, boolean>}\n     * @private\n     */\n    this.params_ = options.params.reduce((acc, value) => {\n      acc[value] = true;\n      return acc;\n    }, {});\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.replace_ = options.replace;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.prefix_ = options.prefix;\n\n    /**\n     * @private\n     * @type {!Array<import(\"../events.js\").EventsKey>}\n     */\n    this.listenerKeys_ = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.initial_ = true;\n    this.updateState_ = this.updateState_.bind(this);\n\n    /**\n     * The tracked parameter callbacks.\n     * @private\n     * @type {Object<string, Callback>}\n     */\n    this.trackedCallbacks_ = {};\n\n    /**\n     * The tracked parameter values.\n     * @private\n     * @type {Object<string, string|null>}\n     */\n    this.trackedValues_ = {};\n  }\n\n  /**\n   * @private\n   * @param {string} name A parameter name.\n   * @return {string} A name with the prefix applied.\n   */\n  getParamName_(name) {\n    if (!this.prefix_) {\n      return name;\n    }\n    return this.prefix_ + name;\n  }\n\n  /**\n   * @private\n   * @param {URLSearchParams} params The search params.\n   * @param {string} name The unprefixed parameter name.\n   * @return {string|null} The parameter value.\n   */\n  get_(params, name) {\n    return params.get(this.getParamName_(name));\n  }\n\n  /**\n   * @private\n   * @param {URLSearchParams} params The search params.\n   * @param {string} name The unprefixed parameter name.\n   * @param {string} value The param value.\n   */\n  set_(params, name, value) {\n    if (!(name in this.params_)) {\n      return;\n    }\n    params.set(this.getParamName_(name), value);\n  }\n\n  /**\n   * @private\n   * @param {URLSearchParams} params The search params.\n   * @param {string} name The unprefixed parameter name.\n   */\n  delete_(params, name) {\n    if (!(name in this.params_)) {\n      return;\n    }\n    params.delete(this.getParamName_(name));\n  }\n\n  /**\n   * @param {import(\"../Map.js\").default|null} map Map.\n   */\n  setMap(map) {\n    const oldMap = this.getMap();\n    super.setMap(map);\n    if (map === oldMap) {\n      return;\n    }\n    if (oldMap) {\n      this.unregisterListeners_(oldMap);\n    }\n    if (map) {\n      this.initial_ = true;\n      this.updateState_();\n      this.registerListeners_(map);\n    }\n  }\n\n  /**\n   * @param {import(\"../Map.js\").default} map Map.\n   * @private\n   */\n  registerListeners_(map) {\n    this.listenerKeys_.push(listen(map, MapEventType.MOVEEND, this.updateUrl_, this), listen(map.getLayerGroup(), EventType.CHANGE, this.updateUrl_, this), listen(map, 'change:layergroup', this.handleChangeLayerGroup_, this));\n    if (!this.replace_) {\n      addEventListener('popstate', this.updateState_);\n    }\n  }\n\n  /**\n   * @param {import(\"../Map.js\").default} map Map.\n   * @private\n   */\n  unregisterListeners_(map) {\n    for (let i = 0, ii = this.listenerKeys_.length; i < ii; ++i) {\n      unlistenByKey(this.listenerKeys_[i]);\n    }\n    this.listenerKeys_.length = 0;\n    if (!this.replace_) {\n      removeEventListener('popstate', this.updateState_);\n    }\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n    this.delete_(params, 'x');\n    this.delete_(params, 'y');\n    this.delete_(params, 'z');\n    this.delete_(params, 'r');\n    this.delete_(params, 'l');\n    window.history.replaceState(null, '', url);\n  }\n\n  /**\n   * @private\n   */\n  handleChangeLayerGroup_() {\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    this.unregisterListeners_(map);\n    this.registerListeners_(map);\n    this.initial_ = true;\n    this.updateUrl_();\n  }\n\n  /**\n   * @private\n   */\n  updateState_() {\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n    for (const key in this.trackedCallbacks_) {\n      const value = params.get(key);\n      if (key in this.trackedCallbacks_ && value !== this.trackedValues_[key]) {\n        this.trackedValues_[key] = value;\n        this.trackedCallbacks_[key](value);\n      }\n    }\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    const view = map.getView();\n    if (!view) {\n      return;\n    }\n    let updateView = false;\n\n    /**\n     * @type {import('../View.js').AnimationOptions}\n     */\n    const viewProperties = {};\n    const zoom = readNumber(this.get_(params, 'z'));\n    if ('z' in this.params_ && differentNumber(zoom, view.getZoom())) {\n      updateView = true;\n      viewProperties.zoom = zoom;\n    }\n    const rotation = readNumber(this.get_(params, 'r'));\n    if ('r' in this.params_ && differentNumber(rotation, view.getRotation())) {\n      updateView = true;\n      viewProperties.rotation = rotation;\n    }\n    const center = [readNumber(this.get_(params, 'x')), readNumber(this.get_(params, 'y'))];\n    if (('x' in this.params_ || 'y' in this.params_) && differentArray(center, view.getCenter())) {\n      updateView = true;\n      viewProperties.center = center;\n    }\n    if (updateView) {\n      if (!this.initial_ && this.animationOptions_) {\n        view.animate(Object.assign(viewProperties, this.animationOptions_));\n      } else {\n        if (viewProperties.center) {\n          view.setCenter(viewProperties.center);\n        }\n        if ('zoom' in viewProperties) {\n          view.setZoom(viewProperties.zoom);\n        }\n        if ('rotation' in viewProperties) {\n          view.setRotation(viewProperties.rotation);\n        }\n      }\n    }\n    const layers = map.getAllLayers();\n    const layersParam = this.get_(params, 'l');\n    if ('l' in this.params_ && layersParam && layersParam.length === layers.length) {\n      for (let i = 0, ii = layers.length; i < ii; ++i) {\n        const value = parseInt(layersParam[i]);\n        if (!isNaN(value)) {\n          const visible = Boolean(value);\n          const layer = layers[i];\n          if (layer.getVisible() !== visible) {\n            layer.setVisible(visible);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Register a listener for a URL search parameter.  The callback will be called with a new value\n   * when the corresponding search parameter changes due to history events (e.g. browser navigation).\n   *\n   * @param {string} key The URL search parameter.\n   * @param {Callback} callback The function to call when the search parameter changes.\n   * @return {string|null} The initial value of the search parameter (or null if absent from the URL).\n   * @api\n   */\n  track(key, callback) {\n    this.trackedCallbacks_[key] = callback;\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n    const value = params.get(key);\n    this.trackedValues_[key] = value;\n    return value;\n  }\n\n  /**\n   * Update the URL with a new search parameter value.  If the value is null, it will be\n   * deleted from the search parameters.\n   *\n   * @param {string} key The URL search parameter.\n   * @param {string|null} value The updated value (or null to remove it from the URL).\n   * @api\n   */\n  update(key, value) {\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n    if (value === null) {\n      params.delete(key);\n    } else {\n      params.set(key, value);\n    }\n    if (key in this.trackedValues_) {\n      this.trackedValues_[key] = value;\n    }\n    this.updateHistory_(url);\n  }\n\n  /**\n   * @private\n   */\n  updateUrl_() {\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    const view = map.getView();\n    if (!view) {\n      return;\n    }\n    const center = view.getCenter();\n    const zoom = view.getZoom();\n    const rotation = view.getRotation();\n    const layers = map.getAllLayers();\n    const visibilities = new Array(layers.length);\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n      visibilities[i] = layers[i].getVisible() ? '1' : '0';\n    }\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n    this.set_(params, 'x', writeNumber(center[0]));\n    this.set_(params, 'y', writeNumber(center[1]));\n    this.set_(params, 'z', writeNumber(zoom));\n    this.set_(params, 'r', writeNumber(rotation));\n    this.set_(params, 'l', visibilities.join(''));\n    this.updateHistory_(url);\n    this.initial_ = false;\n  }\n\n  /**\n   * @private\n   * @param {URL} url The URL.\n   */\n  updateHistory_(url) {\n    if (url.href !== window.location.href) {\n      if (this.initial_ || this.replace_) {\n        window.history.replaceState(history.state, '', url);\n      } else {\n        window.history.pushState(null, '', url);\n      }\n    }\n  }\n}\nexport default Link;","map":{"version":3,"names":["EventType","Interaction","MapEventType","listen","unlistenByKey","toFixed","to5","number","readNumber","string","parseFloat","writeNumber","toString","differentNumber","a","b","isNaN","differentArray","Link","constructor","options","Object","assign","animate","params","replace","prefix","animationOptions","duration","animationOptions_","params_","reduce","acc","value","replace_","prefix_","listenerKeys_","initial_","updateState_","bind","trackedCallbacks_","trackedValues_","getParamName_","name","get_","get","set_","set","delete_","delete","setMap","map","oldMap","getMap","unregisterListeners_","registerListeners_","push","MOVEEND","updateUrl_","getLayerGroup","CHANGE","handleChangeLayerGroup_","addEventListener","i","ii","length","removeEventListener","url","URL","window","location","href","searchParams","history","replaceState","key","view","getView","updateView","viewProperties","zoom","getZoom","rotation","getRotation","center","getCenter","setCenter","setZoom","setRotation","layers","getAllLayers","layersParam","parseInt","visible","Boolean","layer","getVisible","setVisible","track","callback","update","updateHistory_","visibilities","Array","join","state","pushState"],"sources":["C:/Users/dongwoo/Desktop/WeatherWhisperer/src/main/fronted/node_modules/ol/interaction/Link.js"],"sourcesContent":["/**\n * @module ol/interaction/Link\n */\nimport EventType from '../events/EventType.js';\nimport Interaction from './Interaction.js';\nimport MapEventType from '../MapEventType.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport {toFixed} from '../math.js';\n\n/**\n * @param {number} number A number.\n * @return {number} A number with at most 5 decimal places.\n */\nfunction to5(number) {\n  return toFixed(number, 5);\n}\n\n/**\n * @param {string} string A string.\n * @return {number} A number representing the string.\n */\nfunction readNumber(string) {\n  return parseFloat(string);\n}\n\n/**\n * @param {number} number A number.\n * @return {string} A string representing the number.\n */\nfunction writeNumber(number) {\n  return to5(number).toString();\n}\n\n/**\n * @param {number} a A number.\n * @param {number} b A number.\n * @return {boolean} The numbers are different.\n */\nfunction differentNumber(a, b) {\n  if (isNaN(a)) {\n    return false;\n  }\n  return a !== readNumber(writeNumber(b));\n}\n\n/**\n * @param {Array<number>} a An array of two numbers.\n * @param {Array<number>} b An array of two numbers.\n * @return {boolean} The arrays are different.\n */\nfunction differentArray(a, b) {\n  return differentNumber(a[0], b[0]) || differentNumber(a[1], b[1]);\n}\n\n/** @typedef {'x'|'y'|'z'|'r'|'l'} Params */\n\n/**\n * @typedef {function(string):void} Callback\n */\n\n/**\n * @typedef {Object} Options\n * @property {boolean|import('../View.js').AnimationOptions} [animate=true] Animate view transitions.\n * @property {Array<Params>} [params=['x', 'y', 'z', 'r', 'l']] Properties to track. Default is to track\n * `x` (center x), `y` (center y), `z` (zoom), `r` (rotation) and `l` (layers).\n * @property {boolean} [replace=false] Replace the current URL without creating the new entry in browser history.\n * By default, changes in the map state result in a new entry being added to the browser history.\n * @property {string} [prefix=''] By default, the URL will be updated with search parameters x, y, z, and r.  To\n * avoid collisions with existing search parameters that your application uses, you can supply a custom prefix for\n * the ones used by this interaction (e.g. 'ol:').\n */\n\n/**\n * @classdesc\n * An interaction that synchronizes the map state with the URL.\n *\n * @api\n */\nclass Link extends Interaction {\n  /**\n   * @param {Options} [options] Link options.\n   */\n  constructor(options) {\n    super();\n\n    options = Object.assign(\n      {\n        animate: true,\n        params: ['x', 'y', 'z', 'r', 'l'],\n        replace: false,\n        prefix: '',\n      },\n      options || {}\n    );\n\n    let animationOptions;\n    if (options.animate === true) {\n      animationOptions = {duration: 250};\n    } else if (!options.animate) {\n      animationOptions = null;\n    } else {\n      animationOptions = options.animate;\n    }\n\n    /**\n     * @type {import('../View.js').AnimationOptions|null}\n     * @private\n     */\n    this.animationOptions_ = animationOptions;\n\n    /**\n     * @type {Object<Params, boolean>}\n     * @private\n     */\n    this.params_ = options.params.reduce((acc, value) => {\n      acc[value] = true;\n      return acc;\n    }, {});\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.replace_ = options.replace;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.prefix_ = options.prefix;\n\n    /**\n     * @private\n     * @type {!Array<import(\"../events.js\").EventsKey>}\n     */\n    this.listenerKeys_ = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.initial_ = true;\n\n    this.updateState_ = this.updateState_.bind(this);\n\n    /**\n     * The tracked parameter callbacks.\n     * @private\n     * @type {Object<string, Callback>}\n     */\n    this.trackedCallbacks_ = {};\n\n    /**\n     * The tracked parameter values.\n     * @private\n     * @type {Object<string, string|null>}\n     */\n    this.trackedValues_ = {};\n  }\n\n  /**\n   * @private\n   * @param {string} name A parameter name.\n   * @return {string} A name with the prefix applied.\n   */\n  getParamName_(name) {\n    if (!this.prefix_) {\n      return name;\n    }\n    return this.prefix_ + name;\n  }\n\n  /**\n   * @private\n   * @param {URLSearchParams} params The search params.\n   * @param {string} name The unprefixed parameter name.\n   * @return {string|null} The parameter value.\n   */\n  get_(params, name) {\n    return params.get(this.getParamName_(name));\n  }\n\n  /**\n   * @private\n   * @param {URLSearchParams} params The search params.\n   * @param {string} name The unprefixed parameter name.\n   * @param {string} value The param value.\n   */\n  set_(params, name, value) {\n    if (!(name in this.params_)) {\n      return;\n    }\n    params.set(this.getParamName_(name), value);\n  }\n\n  /**\n   * @private\n   * @param {URLSearchParams} params The search params.\n   * @param {string} name The unprefixed parameter name.\n   */\n  delete_(params, name) {\n    if (!(name in this.params_)) {\n      return;\n    }\n    params.delete(this.getParamName_(name));\n  }\n\n  /**\n   * @param {import(\"../Map.js\").default|null} map Map.\n   */\n  setMap(map) {\n    const oldMap = this.getMap();\n    super.setMap(map);\n    if (map === oldMap) {\n      return;\n    }\n    if (oldMap) {\n      this.unregisterListeners_(oldMap);\n    }\n    if (map) {\n      this.initial_ = true;\n      this.updateState_();\n      this.registerListeners_(map);\n    }\n  }\n\n  /**\n   * @param {import(\"../Map.js\").default} map Map.\n   * @private\n   */\n  registerListeners_(map) {\n    this.listenerKeys_.push(\n      listen(map, MapEventType.MOVEEND, this.updateUrl_, this),\n      listen(map.getLayerGroup(), EventType.CHANGE, this.updateUrl_, this),\n      listen(map, 'change:layergroup', this.handleChangeLayerGroup_, this)\n    );\n\n    if (!this.replace_) {\n      addEventListener('popstate', this.updateState_);\n    }\n  }\n\n  /**\n   * @param {import(\"../Map.js\").default} map Map.\n   * @private\n   */\n  unregisterListeners_(map) {\n    for (let i = 0, ii = this.listenerKeys_.length; i < ii; ++i) {\n      unlistenByKey(this.listenerKeys_[i]);\n    }\n    this.listenerKeys_.length = 0;\n\n    if (!this.replace_) {\n      removeEventListener('popstate', this.updateState_);\n    }\n\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n    this.delete_(params, 'x');\n    this.delete_(params, 'y');\n    this.delete_(params, 'z');\n    this.delete_(params, 'r');\n    this.delete_(params, 'l');\n    window.history.replaceState(null, '', url);\n  }\n\n  /**\n   * @private\n   */\n  handleChangeLayerGroup_() {\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    this.unregisterListeners_(map);\n    this.registerListeners_(map);\n    this.initial_ = true;\n    this.updateUrl_();\n  }\n\n  /**\n   * @private\n   */\n  updateState_() {\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n    for (const key in this.trackedCallbacks_) {\n      const value = params.get(key);\n      if (key in this.trackedCallbacks_ && value !== this.trackedValues_[key]) {\n        this.trackedValues_[key] = value;\n        this.trackedCallbacks_[key](value);\n      }\n    }\n\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    const view = map.getView();\n    if (!view) {\n      return;\n    }\n\n    let updateView = false;\n\n    /**\n     * @type {import('../View.js').AnimationOptions}\n     */\n    const viewProperties = {};\n\n    const zoom = readNumber(this.get_(params, 'z'));\n    if ('z' in this.params_ && differentNumber(zoom, view.getZoom())) {\n      updateView = true;\n      viewProperties.zoom = zoom;\n    }\n\n    const rotation = readNumber(this.get_(params, 'r'));\n    if ('r' in this.params_ && differentNumber(rotation, view.getRotation())) {\n      updateView = true;\n      viewProperties.rotation = rotation;\n    }\n\n    const center = [\n      readNumber(this.get_(params, 'x')),\n      readNumber(this.get_(params, 'y')),\n    ];\n    if (\n      ('x' in this.params_ || 'y' in this.params_) &&\n      differentArray(center, view.getCenter())\n    ) {\n      updateView = true;\n      viewProperties.center = center;\n    }\n\n    if (updateView) {\n      if (!this.initial_ && this.animationOptions_) {\n        view.animate(Object.assign(viewProperties, this.animationOptions_));\n      } else {\n        if (viewProperties.center) {\n          view.setCenter(viewProperties.center);\n        }\n        if ('zoom' in viewProperties) {\n          view.setZoom(viewProperties.zoom);\n        }\n        if ('rotation' in viewProperties) {\n          view.setRotation(viewProperties.rotation);\n        }\n      }\n    }\n\n    const layers = map.getAllLayers();\n    const layersParam = this.get_(params, 'l');\n    if (\n      'l' in this.params_ &&\n      layersParam &&\n      layersParam.length === layers.length\n    ) {\n      for (let i = 0, ii = layers.length; i < ii; ++i) {\n        const value = parseInt(layersParam[i]);\n        if (!isNaN(value)) {\n          const visible = Boolean(value);\n          const layer = layers[i];\n          if (layer.getVisible() !== visible) {\n            layer.setVisible(visible);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Register a listener for a URL search parameter.  The callback will be called with a new value\n   * when the corresponding search parameter changes due to history events (e.g. browser navigation).\n   *\n   * @param {string} key The URL search parameter.\n   * @param {Callback} callback The function to call when the search parameter changes.\n   * @return {string|null} The initial value of the search parameter (or null if absent from the URL).\n   * @api\n   */\n  track(key, callback) {\n    this.trackedCallbacks_[key] = callback;\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n    const value = params.get(key);\n    this.trackedValues_[key] = value;\n    return value;\n  }\n\n  /**\n   * Update the URL with a new search parameter value.  If the value is null, it will be\n   * deleted from the search parameters.\n   *\n   * @param {string} key The URL search parameter.\n   * @param {string|null} value The updated value (or null to remove it from the URL).\n   * @api\n   */\n  update(key, value) {\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n    if (value === null) {\n      params.delete(key);\n    } else {\n      params.set(key, value);\n    }\n    if (key in this.trackedValues_) {\n      this.trackedValues_[key] = value;\n    }\n    this.updateHistory_(url);\n  }\n\n  /**\n   * @private\n   */\n  updateUrl_() {\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    const view = map.getView();\n    if (!view) {\n      return;\n    }\n\n    const center = view.getCenter();\n    const zoom = view.getZoom();\n    const rotation = view.getRotation();\n\n    const layers = map.getAllLayers();\n    const visibilities = new Array(layers.length);\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n      visibilities[i] = layers[i].getVisible() ? '1' : '0';\n    }\n\n    const url = new URL(window.location.href);\n    const params = url.searchParams;\n\n    this.set_(params, 'x', writeNumber(center[0]));\n    this.set_(params, 'y', writeNumber(center[1]));\n    this.set_(params, 'z', writeNumber(zoom));\n    this.set_(params, 'r', writeNumber(rotation));\n    this.set_(params, 'l', visibilities.join(''));\n\n    this.updateHistory_(url);\n    this.initial_ = false;\n  }\n\n  /**\n   * @private\n   * @param {URL} url The URL.\n   */\n  updateHistory_(url) {\n    if (url.href !== window.location.href) {\n      if (this.initial_ || this.replace_) {\n        window.history.replaceState(history.state, '', url);\n      } else {\n        window.history.pushState(null, '', url);\n      }\n    }\n  }\n}\n\nexport default Link;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}